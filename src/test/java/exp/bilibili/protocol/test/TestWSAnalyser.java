package exp.bilibili.protocol.test;

import exp.bilibili.plugin.utils.ZlibUtils;
import exp.libs.utils.num.BODHUtils;
import exp.libs.utils.other.StrUtils;

/**
 * <PRE>
 * 测试WebSocket的接收报文
 * </PRE>
 * <br/><B>PROJECT : </B> bilibili-plugin
 * <br/><B>SUPPORT : </B> <a href="http://www.exp-blog.com" target="_blank">www.exp-blog.com</a> 
 * @version   2017-12-17
 * @author    EXP: 272629724@qq.com
 * @since     jdk版本：jdk1.6
 */
public class TestWSAnalyser {

	public static void main(String[] args) {
		String hex = "000004D600100002000000050000000078DAAC97CD4F1B4718C69D43A55E2AF54FA8DEF320CD3BDFEB4325834D54A5690F6DD4AA2E42365E2756C0A90A54AA50A49002718096444A9B800DA1126DBE28F94229189AFC31F5EEDA27CEBD55B3C6C621762071C05AEF6B7967767FF3CCF3BC8E444E7C19F93062FFDEB38709181AC94014E2B1CF4E9F193CFDC5492090CB672F403499A40409930495D69AA124281D2A854325A5A25171A6905002882E432128106AFF0708F89BCFBDE9396FEDBEB75BAE94678024B9B6170A24E0FFB5562997BD85FB5E71D55BBB57D99AF54B57F72F254829B553030C90A42010CCDDAC15EF02016FE3815F5A6F94926987284115E38200D839938C114AA4A1523B94C0B7E3947257DAE1EC5030961B1B767B908B1E04F25235104E9C1F1F1E261330360AD183472530340651E04C63A23F16878B075F0D0F74E0622472A2AF7BA6C81B9564CA58A65C3929C1E5D001D3EA8B457F763628DD0E96A6EA7CABBF5FAADD5BEF039244E4C220A7042AFF5CABECCE064B53DEC253FFEA5C27AEFEF24C75611E1A27FECD55FFD779204C51A9DF0C2C84631E8550C884EE8FF5B20E083FE81E21A3A68150491D22E4596499B43C2C4BF291FF68ABFAA2142C4D057FAC00490A6D1CAA085437B6FCC2F5DAADA7DE747B410E90245A184D406F0783F17E194F249CF6302213ED607C95F8B4EFF3D3092090498DA5203A01E3B90C44391A23D01018CFA7465C8882FFAC10DE3DE446075399915C1EA2D9D4F0A84B60F487DC7710A504C27724307261E8FCA09BCDBAF6A6E845BB0E9F74BF0EDCA1A40739324D9940FB7C9036326586943E5808AFB8E26DDCF4B60A40920E575C30E610F066D6BDE5CBC1E2F3DA95F9B6FC15016FED8EFFF0E7DAF63410486446C6F399F837E752F9B340A405DC94695DBAA85FB75AFB2E2068AB2784D5D16B287B85343AA63A08FACC1B82545272D64251C80343A0A19A59DA65546B6C5173E17A6567DDBFF5D09B59F5668A7BBB9396A6A254694DA0FAA854D9BAE4AFFE1D2C4DD5FE5CF4CBD7DA22452450DBF9C57F52A8159F40E3FC54CE1235C8B91204A944A6986CFA813C86D1BE1554D45461AFA3DF91D11E862A65A3D29AB3D02228539856FCB045E4D340928A29A12552FB6131B833D77C750459D95EF6D636ABC52B36B0962FFBA5756FE18655A6D2AF52A4AF95666AF47CCF8F6EEAFB2643E61C0BA1C34C22DEDBDBD70161AC4B848A8AFD4A097442849ABAEE906C41E83D9E0C6EDCB5998F8209632C98AD92FFDB76B0F9C05F7930D81E9F7E7DD8A3D29209D1C4C779384283697B151AD322C2B0381A603F8AB891BC83399FF8B87B8754CDBD6D1C1A1AA4CA3A5974E42B4955CF297F67B39E53C8B57278C87367B1522ED79657EA27ED89B223881E12E411448F176D719DE0C650D121DAFE7B07F484430C221574BFFBCCB80EA6986A81B7B77BDBA63A93DC5043C0092E6F33E315663A663A769FE9683021FA4D27EB3AD9EDBED394204344AE0C0F1BC44C46A59543E54B0DA2F7783A987A16BCD8098AB7EA7DB7E48E325671509BDEF64B857F2737BE6E2F1771E406140A153B66BBFDB6FEA56398E8D7A603C6F7BBC46858B34914CAC6186475369D36B4E5B74BB0F35375EE71AD38B5B73BEF97AE0637EEEEED4EFA93F7EAF92A38E74218EBF5974EE57367CF8D75521557ADFB49682ACC1BEC2316EB8DABBEB6EDC5FF010000FFFFB60FEE48";
		String str = new String(ZlibUtils.decompress(BODHUtils.toBytes(hex.substring(32))));
		String[] msgs = str.split("\0");
		for(String msg : msgs) {
			if(StrUtils.isNotTrimEmpty(msg) && msg.startsWith("{")) {
				System.out.println(msg);
			}
		}
	}
	
}
