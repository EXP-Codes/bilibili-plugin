package exp.bilibili.protocol.test;

import exp.bilibili.plugin.utils.ZlibUtils;
import exp.libs.utils.num.BODHUtils;
import exp.libs.utils.other.StrUtils;

/**
 * <PRE>
 * 测试WebSocket的接收报文
 * </PRE>
 * <br/><B>PROJECT : </B> bilibili-plugin
 * <br/><B>SUPPORT : </B> <a href="http://www.exp-blog.com" target="_blank">www.exp-blog.com</a> 
 * @version   2017-12-17
 * @author    EXP: 272629724@qq.com
 * @since     jdk版本：jdk1.6
 */
public class TestWSAnalyser {

	public static void main(String[] args) {
		String hex = "0000023A00100002000000050000000078DA5452CB6EDC2C141EE9D7BFEF339C35CAD81EDB637BDB365116CD26A36EEA0A1D037668C0585C264AA33C4ADFB502722B0B0B7F9C03DFE5EC76FFFDD97DDAC5F57FFC3C01D31C06B8FD7AF3855E5D5F9E8000478F303CC122677F835AC00063E8663C8CA13DB62510588386E14020ACF958CBFB60E2020233B208DD79BF0DE37EDCCBF2E28E3B355D30A3C7FD34BB711F4BC67D2FCAB6E92ADEB2AA6F4BD157870336381D79DFF3BA3D16584C4D51F7E5C5AF6D01024B40CBA91267A160280858669C87A1E99BAE3BB64D4B20480E43D9347D57547541C09B8D2A198B7EFC24E0A516CEA3DE624D5F34755DF7354922AF635FDE9E1E3791AE47E6A55993F4A6E9AA31F41D9F81800B9BB0A922ED686CA2C98F376842CFEEFE3DC810337A3234B20420B059199D2A8B28668D6059947DD5146D778C1E8B876F826316BB8A8793F42A53D319CEA21218AF9B042621692F7F5367824D4928791610BB3CE6646385151AE59AAE5B8CE299BD54E7176DE22C567FCB8C15EFBF37AF22352AE5CF54BB2593709B6012D5959C3D0C6B508AC06ABC64E24349EC397DFF6CC2EA2F152E30781B0401869B0B51416E43CE2F8D52E621BF3ACF82793A29C3EE5340CCC895FA94D02BD998B24745E3110C87E2AD2DDB6E0D7286CE27D30B02DC62BE9B59E9E966CD94FE3C2E546A5C5EAC7462E554A3F3D18DCC4C3A3A4B1B672913E742A365986724518BD13A8F8F340E1A0CD52BF6915F7C2AC5FF3E816555157155F0FCFC370000FFFF6A6A1EC2";
		String str = new String(ZlibUtils.decompress(BODHUtils.toBytes(hex.substring(32))));
		String[] msgs = str.split("\0");
		for(String msg : msgs) {
			if(StrUtils.isNotTrimEmpty(msg) && msg.startsWith("{")) {
				System.out.println(msg);
			}
		}
	}
	
}
